'use strict';var $jscomp$templatelit$0=["\\$1"];$jscomp$templatelit$0.raw=["\\$1"];var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,d=[];!(c=a.next()).done;)d.push(c.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};
$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,c){this.nextAddress=c;return{value:a}};
$jscomp.generator.Context.prototype.yieldAll=function(a,c){a=$jscomp.makeIterator(a);var d=a.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=c;else return this.yieldAllIterator_=a,this.yield(d.value,c)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,c){this.catchAddress_=a;void 0!=c&&(this.finallyAddress_=c)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,c){this.nextAddress=a;this.catchAddress_=c||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,c,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=c||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,c){c=this.finallyContexts_.splice(c||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var c in a)this.properties_.push(c);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var c=this.context_.yieldAllIterator_;if(c)return this.yieldAllStep_("return"in c?c["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,c,d){try{var e=a.call(this.context_.yieldAllIterator_,c);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var g=e.value}catch(h){return this.context_.yieldAllIterator_=null,this.context_.throw_(h),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,g);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(c){this.context_.yieldResult=void 0,this.context_.throw_(c)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(c){return a.next_(c)};this.throw=function(c){return a.throw_(c)};this.return=function(c){return a.return_(c)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,c){$jscomp.generator.Generator_.prototype=a.prototype;return new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c))};
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(d,e,g){return d==a&&"q"==e&&g==c}}));return!0===c.q}catch(d){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill=function(a,c,d,e){if(c){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var g=a[e];g in d||(d[g]={});d=d[g]}a=a[a.length-1];e=d[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var c=Object.seal({}),e=Object.seal({}),d=new a([[c,2],[e,3]]);if(2!=d.get(c)||3!=d.get(e))return!1;d.delete(c);d.set(e,4);return!d.has(c)&&4==d.get(e)}catch(t){return!1}}function d(a){$jscomp.owns(a,g)||$jscomp.defineProperty(a,g,{value:{}})}function e(a){var c=Object[a];c&&(Object[a]=function(a){d(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;
var g="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var h=0,l=function(a){this.id_=(h+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};l.prototype.set=function(a,c){d(a);if(!$jscomp.owns(a,g))throw Error("WeakMap key fail: "+a);a[g][this.id_]=c;return this};l.prototype.get=function(a){return $jscomp.owns(a,g)?a[g][this.id_]:void 0};l.prototype.has=
function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};l.prototype.delete=function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return l},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a($jscomp.makeIterator([[c,"s"]]));if("s"!=d.get(c)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var e=d.entries(),g=e.next();if(g.done||g.value[0]!=c||"s"!=g.value[1])return!1;g=e.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!e.next().done?!1:!0}catch(w){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=new WeakMap,e=function(a){this.data_={};this.head_=l();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};e.prototype.set=function(a,c){var d=g(this,a);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=c:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:c},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};e.prototype.delete=function(a){a=g(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=l();this.size=0};e.prototype.has=function(a){return!!g(this,a).entry};
e.prototype.get=function(a){return(a=g(this,a).entry)&&a.value};e.prototype.entries=function(){return h(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return h(this,function(a){return a.key})};e.prototype.values=function(){return h(this,function(a){return a.value})};e.prototype.forEach=function(a,c){for(var d=this.entries(),e;!(e=d.next()).done;)e=e.value,a.call(c,e[1],e[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=function(a,c){var e=c&&typeof c;"object"==
e||"function"==e?d.has(c)?e=d.get(c):(e=""+ ++q,d.set(c,e)):e="p_"+c;var g=a.data_[e];if(g&&$jscomp.owns(a.data_,e))for(a=0;a<g.length;a++){var h=g[a];if(c!==c&&h.key!==h.key||c===h.key)return{id:e,list:g,index:a,entry:h}}return{id:e,list:g,index:-1,entry:void 0}},h=function(a,c){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:c(d)};d=null}return{done:!0,value:void 0}})},l=function(){var a={};return a.previous=
a.next=a.head=a},q=0;return e},"es6","es3");$jscomp.polyfill("Number.isNaN",function(a){return a?a:function(a){return"number"===typeof a&&isNaN(a)}},"es6","es3");$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var g=d++;return{value:c(g,a[g]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return[a,d]})}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,d){return a===d?0!==a||1/a===1/d:a!==a&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,d){var c=this;c instanceof String&&(c=String(c));var g=c.length;d=d||0;for(0>d&&(d=Math.max(d+g,0));d<g;d++){var h=c[d];if(h===a||Object.is(h,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,d){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,d||0)}},"es6","es3");
$jscomp.findInternal=function(a,c,d){a instanceof String&&(a=String(a));for(var e=a.length,g=0;g<e;g++){var h=a[g];if(c.call(d,h,g,a))return{i:g,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es8","es3");
$jscomp.polyfill("Set",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a($jscomp.makeIterator([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var h=d.entries(),l=h.next();if(l.done||l.value[0]!=c||l.value[1]!=c)return!1;l=h.next();return l.done||l.value[0]==c||4!=l.value[0].x||l.value[1]!=l.value[0]?!1:h.next().done}catch(q){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};d.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};d.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};d.prototype.clear=function(){this.map_.clear();
this.size=0};d.prototype.has=function(a){return this.map_.has(a)};d.prototype.entries=function(){return this.map_.entries()};d.prototype.values=function(){return this.map_.values()};d.prototype.keys=d.prototype.values;d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(a,c){var d=this;this.map_.forEach(function(e){return a.call(c,e,e,d)})};return d},"es6","es3");
var Dag=function(){function a(b){var f;return $jscomp.generator.createGenerator(a,function(a){switch(a.nextAddress){case 1:f=b?b+1:0;case 2:return a.yield(f++,2)}})}var c=function(b){for(var a=0;a<arguments.length;++a);},d=function(b){for(var a=0;a<arguments.length;++a);return!1};(new Map).set("true",!0).set("false",!1);var e=function(b){return void 0!==b},g=function(b){return"string"===typeof b},h=function(b){return"number"===typeof b&&!Number.isNaN(b)},l=function(b,a){return b.length===a.length&&
b.every(function(b,f){return a[f]===b})},q=function(b,a){return function(f){f=a.reduce(function(b,a){try{if(null===a)var f=a;else{var c=1*a;f=Number.isNaN(c)?a:c}return b[f]}catch(Y){}},f);return void 0===f?b:f}},v=function(b){var a=Math.pow(10,b);return function(b){return Math.round(b*a)/a}},p=function(b){return g(b)&&!Number.isNaN(t(b))},t=function(b){return parseInt(b.split("$").join(""),10)-1},E=function(b,a){return b.filter(function(b){return b[0]!==a})},w=function(b){try{var a=JSON.parse(b)}catch(X){}return a},
G=new Map([["!=",function(b,a){return b!=a}],["==",function(b,a){return b==a}],["!==",function(b,a){return b!==a}],["===",function(b,a){return b===a}],["<=",function(b,a){return b<=a}],[">=",function(b,a){return b>=a}],["<",function(b,a){return b<a}],[">",function(b,a){return b>a}]]),x=new Map([["vu",function(b,a,c){return b?a:void 0}],["10",function(b,a,c){return b?1:0}],["tf",function(b,a,c){return b}],["ab",function(b,a,c){return b?a:c}]]),H=function(b){var a=[].concat($jscomp.arrayFromIterable("+-*/%()".split("")),
$jscomp.arrayFromIterable("0123456789.".split("")),$jscomp.arrayFromIterable(["$"," ","'"]),$jscomp.arrayFromIterable("& | ^ ~ << >> >>>".split(" ")),$jscomp.arrayFromIterable(["int","len"]));return[].concat($jscomp.arrayFromIterable(b)).filter(function(b){return a.includes(b)}).join("")},y=function(b){try{return[null,new Function("X",['const len = e => ("" + e).length;const int = e => parseInt(e, 10);',"try {return "+b+";}catch(e){return;}"].join(""))]}catch(f){return['Could not make a function with "'+
b+'"',c]}},I=function(b,a){var f="Unable to clean math",d=c;g(b)?(b=a.reduce(function(b,a,f){return b.split("$"+(f+1)).join("X.get("+a+")")},H(b)),b.includes("$")||(d=$jscomp.makeIterator(y(b)),f=d.next().value,d=d.next().value)):(d=$jscomp.makeIterator(y(b)),f=d.next().value,d=d.next().value);return[f,d]},J=function(b,a){b=b.map(function(b){b=$jscomp.makeIterator(b);var f=b.next().value,c=b.next().value;if(g(c)&&p(c)){var d=t(c);return[f,function(b){return b.get(a[d])}]}return[f,function(){return c}]});
var f=new Map(b);return[null,function(b){var c=f.get(b.get(a[0]));return c?c(b):void 0}]},K=function(b,a){var f=v(b);return[null,function(b){return f(b.get(a[0]))}]},r=function(b,a){if(g(b)){var f=t(b);var c=function(b){return b.get(a[f])}}else c=function(){return b};return c},L=function(b,a){var f=$jscomp.makeIterator(b);b=f.next().value;var e=f.next().value,g=f.next().value;f=f.next().value;var F=r(b,a),h=r(g,a),k=G.get(e)||d,u=x.get(f)||c;return[null,function(b){var a=$jscomp.makeIterator([F(b),
h(b)]);b=a.next().value;a=a.next().value;return u(k(b,a),b,a)}]},M=function(b,a){var f=$jscomp.makeIterator(b);b=f.next().value;var d=f.next().value,e=f.next().value;f=f.next().value;var g=r(b,a),h=r(d,a),k=r(e,a),u=x.get(f)||c;return[null,function(b){var a=$jscomp.makeIterator([g(b),h(b),k(b)]);b=a.next().value;var f=a.next().value;a=a.next().value;a=$jscomp.makeIterator([Math.min(f,a),Math.max(f,a)]);f=a.next().value;a=a.next().value;return b>=f&&b<=a?u(!0,b,f):b>=f?u(!1,b,a):u(!1,b,f)}]},N=function(b,
a){return[null,l(b,[null])?function(b){return b.get(a.length?a[0]:"data")}:function(f){return q(void 0,b)(f.get(a.length?a[0]:"data"))}]},O=function(a,f){f=$jscomp.makeIterator(a);a=f.next().value;f=f.next().value;var b=["_ev",a.toString(),f];return[null,function(a){return q(void 0,b)(a.get("data"))}]},z=function(a,f){return[null,function(){return a}]},P=(new Map).set("Math",function(a){return e(a.math)}).set("Enumerator",function(a){return a.enum&&a.enum.length}).set("Rounding",function(a){return e(a.round)}).set("Comparator",
function(a){return a.comparator&&a.comparator.length}).set("Range",function(a){return a.between&&a.between.length}).set("Data Access",function(a){return a.path&&a.path.length}).set("Event Access",function(a){return a.evCode&&2===a.evCode.length}).set("Constant",function(a){return e(a.fallback)}),Q=(new Map).set("Math",function(a){return I(a.math,a.args)}).set("Enumerator",function(a){return J(a.enum,a.args)}).set("Rounding",function(a){return K(a.round,a.args)}).set("Comparator",function(a){return L(a.comparator,
a.args)}).set("Range",function(a){return M(a.between,a.args)}).set("Data Access",function(a){return N(a.path,a.args)}).set("Event Access",function(a){return O(a.evCode,a.args)}).set("Constant",function(a){return z(a.fallback,a.args)}).set(void 0,function(a){return z(a.fallback,a.args)}),R=(new Map).set("Math",function(a){return a.math}).set("Enumerator",function(a){return a.enum.map(function(a){var b=$jscomp.makeIterator(a);a=b.next().value;b=b.next().value;return"{"+a+" \ud83e\udc1a "+b+"}"}).join("|")}).set("Rounding",
function(a){return a.round}).set("Comparator",function(a){return a.comparator.join(" ").replace(/([<>])/gi,String.raw($jscomp$templatelit$0))}).set("Range",function(a){return a.between.join(" ")}).set("Data Access",function(a){return a.path.join(" ")}).set("Event Access",function(a){return a.evCode.join(" ")}).set("Constant",function(a){return a.fallback}).set(void 0,function(a){return"Not Configured"}),k=function(a,f,d){var b=this;this._id=a;this._name=f;this._args=[];this._math=void 0;this._enum=
[];this._comparator=[];this._between=[];this._round=void 0;this._path=[];this._evCode=[];this._fallback=void 0;this._nodus="Not init";this._func=c;d&&(this._id=d.I,this.name=d.N,this.setFallback(d.D),this.setMath(d.M),d.E.forEach(function(a){a&&b.addEnum.apply(b,$jscomp.arrayFromIterable(a))}),this.setRound(d.R),this.setPath.apply(this,$jscomp.arrayFromIterable(d.P)),this.setComparator.apply(this,$jscomp.arrayFromIterable(d.C)),this.setBetween.apply(this,$jscomp.arrayFromIterable(d.B)),this.setEvCode.apply(this,
$jscomp.arrayFromIterable(d.V)))};k.prototype.dump=function(){return{A:this._args,B:this._between,C:this._comparator,D:this._fallback,E:this._enum,I:this.id,M:this._math,N:this.name,P:this._path,R:this._round,V:this._evCode}};k.prototype._clearAll=function(a){this._path=[];this._enum=void 0===a||a?[]:this._enum;this._comparator=[];this._between=[];this._evCode=[];this._math=this._round=void 0;this._nodus="Changed"};k.prototype.reset=function(){this._clearAll(!0);this._fallback=void 0;this._nodus=
"Not init"};k.prototype.addArg=function(a){this._args.push(a._id);this._nodus="Args added";return this};k.prototype.delArg=function(a){this._args=this._args.filter(function(b){return b!==a._id});this._nodus="Args removed";return this};k.prototype.setAllArgs=function(a){Array.isArray(a)&&a.every(h)&&(this._args=a)};k.prototype.setFallback=function(a){this._fallback=a;return this};k.prototype.setEvCode=function(a,f){if(e(a)){this._clearAll();var b="data";f&&(f=f.toLowerCase(),b=["data","desc","code"].includes(f)?
f:b);this._evCode=[a,b]}return this};k.prototype.setPath=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];[].concat($jscomp.arrayFromIterable(b)).length&&[].concat($jscomp.arrayFromIterable(b)).every(e)&&(this._clearAll(),this._path=[].concat($jscomp.arrayFromIterable(b)));return this};k.prototype.setMath=function(a){e(a)&&(this._clearAll(),this._math=a);return this};k.prototype.setRound=function(a){h(a)&&(this._clearAll(),this._round=v(0)(a));return this};k.prototype.setComparator=
function(a,f,c,d){var b=!0;b=(h(a)||p(a))&&b;b=(h(c)||p(c))&&b;b="!= !== == === <= >= < >".split(" ").includes(f)&&b;if(b=["vu","10","tf","ab"].includes(d)&&b)this._clearAll(),this._comparator=[a,f,c,d];return this};k.prototype.setBetween=function(a,f,c,d){var b=!0;b=(h(a)||p(a))&&b;b=(h(f)||p(f))&&b;b=(h(c)||p(c))&&b;if(b=["vu","10","tf","ab"].includes(d)&&b)this._clearAll(),this._between=[a,f,c,d];return this};k.prototype.addEnum=function(a,f){if(void 0===a)return this;this._clearAll(!1);this._enum=
[].concat($jscomp.arrayFromIterable((new Map(this._enum)).set(a,f).entries()));return this};k.prototype.delEnum=function(a){this._enum=E(this._enum,a);this._nodus="Changed";return this};k.prototype.clean=function(){var a=$jscomp.makeIterator(Q.get(this.type)(this)),f=a.next().value;a=a.next().value;this._nodus=f;this._func=a;return this};k.prototype.solve=function(a){if(this._nodus)this.clean();else{var b=this._func(a);return a.set(this._id,void 0===b?this.fallback:b)}return this._nodus?(a.set(this._id,
void 0),a.set("err_"+this._id,!this._nodus),a):this.solve(a)};k.isIn=function(a){return function(b,c){c=$jscomp.makeIterator(c);var f=c.next().value;return c.next().value.has(a)?b.push(f)&&b:b}};$jscomp.global.Object.defineProperties(k.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this._id}},descr:{configurable:!0,enumerable:!0,get:function(){return R.get(this.type)(this)}},name:{configurable:!0,enumerable:!0,get:function(){return this._name},set:function(a){this._name=a}},type:{configurable:!0,
enumerable:!0,get:function(){var a=this,c=[].concat($jscomp.arrayFromIterable(P.entries())).find(function(b){b=$jscomp.makeIterator(b);b.next();b=b.next().value;return b(a)});return c?c[0]:void 0}},args:{configurable:!0,enumerable:!0,get:function(){return this._args}},fallback:{configurable:!0,enumerable:!0,get:function(){return this._fallback}},evCode:{configurable:!0,enumerable:!0,get:function(){return this._evCode}},path:{configurable:!0,enumerable:!0,get:function(){return this._path}},math:{configurable:!0,
enumerable:!0,get:function(){return this._math}},round:{configurable:!0,enumerable:!0,get:function(){return this._round}},comparator:{configurable:!0,enumerable:!0,get:function(){return this._comparator}},between:{configurable:!0,enumerable:!0,get:function(){return this._between}},enum:{configurable:!0,enumerable:!0,get:function(){return this._enum}}});var S=function(a){return function(b){var c=b.id,d=b.name,f="ROOT"===d?"Root":b.type,e="ROOT"===d?"Final":b.descr,g=b.args.map(function(a,b){return"<"+
a+">$"+(b+1)}).join("|");b=(b=b.fallback)?"|Default: "+b:"";var h=a?"|"+a.get(c):"";return c+' [label="{{'+g+"}|"+f+"|"+e+"|{ID:"+c+"|"+d+"}"+b+h+'}"];'}},T=function(a){return function(b,c){var d=a?a.get(b.id):"";return b.id+" -> "+c.id+":"+b.id+'[label="'+d+'"]'}},U=function(a,c){var b=T(c),d=[].concat($jscomp.arrayFromIterable(a.G.entries())).reduce(function(a,b){b=$jscomp.makeIterator(b);var c=b.next().value;b=b.next().value;return[].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable([].concat($jscomp.arrayFromIterable(b)).map(function(a){return[c,
a]})))},[]).map(function(a){var c=$jscomp.makeIterator(a);a=c.next().value;c=c.next().value;return b(a,c)}).reduce(function(a,b){return a+" "+b+";"},"");c=S(c);c=a.nodes.map(c).join(" ");var f=a.description;f=a.units.trim().length?f+" - "+a.units:f;return["digraph { node [shape=record];",'label = "'+f+'";',""+c,""+d,"}"].join(" ")},n=function(a){return a instanceof k},A=function(a){return a.id},B=function(a){var b=[].concat($jscomp.arrayFromIterable(a.keys())).reduce(function(a,b){return a.set(b,
0)||a},new Map);[].concat($jscomp.arrayFromIterable(a.values())).forEach(function(a){return a.forEach(function(a){return b.set(a,b.has(a)?b.get(a)+1:0)})});a=[].concat($jscomp.arrayFromIterable(a.keys())).filter(function(a){return 0===b.get(a)});return{C:b,Q:a}},V=function(a){var b=B(a),c=b.C,d=b.Q;for(b=[];d.length;){var e=d.pop();b.push(e);a.get(e).forEach(function(a){c.set(a,c.get(a)-1);0===c.get(a)&&d.push(a)})}return b},C=function(a){for(var b=$jscomp.makeIterator(a.entries()),c=b.next();!c.done;c=
b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;if(0===d.next().value.size&&0!==c){a.delete(c);d=$jscomp.makeIterator(a.values());for(var e=d.next();!e.done;e=d.next())e.value.delete(c)}}[].concat($jscomp.arrayFromIterable(a.entries())).reduce(function(a,b){return a||0===b[1].size&&0!==b[0]},!1)&&C(a);return a},D=function(a){return function(b){return new k(a.next().value,b)}},m=function(b,c){this._meta=null;this._ref=this.ref=e(c)?c:null;this._description=this.description=g(b)?b:"";
this._units="";this.G=new Map;this._nodeMaker=D(a());this._rootNode=this.makeNode("ROOT");this._rootNode.setMath("$1")};m.prototype.getNode=function(a){return[].concat($jscomp.arrayFromIterable(this.G.keys())).find(function(b){return b.id===a})};m.prototype.makeNode=function(a){a=this._nodeMaker(a);this.G.set(a,new Set);return a};m.prototype.addNode=function(b){if(!n(b)||this.ids.includes(b.id))return!1;if(this.G.has(b))return b;this.G.set(b,new Set);this._nodeMaker=D(a(Math.max.apply(Math,$jscomp.arrayFromIterable(this.ids))));
return b};m.prototype.delNode=function(a){var b=!1;if(a&&n(a)&&a!==this._rootNode&&(b=this.G.delete(a)))for(var c=$jscomp.makeIterator(this.G.entries()),d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value);var e=d.next().value;d.next().value.delete(a);e.delArg(a)}return b};m.prototype.connect=function(a,c){if(!n(a)||!n(c))return!1;if(a===this.root||c===this.root&&0<this.indegrees(c).length||!this.G.has(a)||!this.G.has(c)||this.G.get(a).has(c))return this;this.G.get(a).add(c);c.addArg(a);
this.topo.length<this.nodes.length&&this.disconnect(a,c);return this};m.prototype.disconnect=function(a,c){if(!n(a)||!n(c))return!1;this.G.has(a)&&(this.G.get(a).delete(c),c.delArg(a));return this};m.prototype.clean=function(){var a=this;this.orphans.forEach(function(b){return a.delNode(b)});this.orphans.length&&this.clean();this.nodes.forEach(function(a){return a.clean()});return this};m.prototype.indegrees=function(a){if(!n(a))return!1;a=k.isIn(a);return[].concat($jscomp.arrayFromIterable(this.G.entries())).reduce(a,
[])};m.prototype.outdegrees=function(a){return n(a)?[].concat($jscomp.arrayFromIterable(this.G.get(a))):!1};m.prototype.getIdG=function(){return[].concat($jscomp.arrayFromIterable(this.G)).reduce(function(a,c){var b=$jscomp.makeIterator(c);c=b.next().value;b=b.next().value;return a.set(c.id,new Set([].concat($jscomp.arrayFromIterable(b)).map(A)))},new Map)};m.prototype.solve=function(a){return this.getSolver()(a)};m.prototype.debug=function(a){return this.getSolver(!0)(a)};m.prototype.debugFormatter=
function(a){return a.set("topoNames",this.topoNames)};m.prototype.getSolver=function(a){var b=this;a=void 0===a?!1:a;var c=C(this.getIdG()),d=this.topo.filter(function(a){return c.has(a.id)}),e=d.map(A),g=d.map(function(a){return a.clean()}),h=this._rootNode.id,k=new Map;k.set("topoIds",e);return function(c){k.set("data",c);c=g.reduce(function(a,b){return b.solve(a)},k);return a?b.debugFormatter(c):c.get(h)}};m.prototype.dump=function(){return JSON.stringify({M:[this.description,this.units,this.ref],
G:[].concat($jscomp.arrayFromIterable(this.getIdG())).map(function(a){var b=$jscomp.makeIterator(a);a=b.next().value;b=b.next().value;return[a,[].concat($jscomp.arrayFromIterable(b))]}),N:this.topo.map(function(a){return a.dump()})})};m.prototype.dotPlot=function(a){a=e(a)?this.debug(a):void 0;return U(this,a)};m.read=function(a){var b=w(a);if(b)try{var c=b.N.map(function(a){return new k(-1,void 0,a)}),d=function(a){return function(b){return b.id===a}},e=new Map(b.G),g=new m;g.G=new Map;for(var h=
$jscomp.makeIterator(e.keys()),l=h.next();!l.done;l=h.next())g.addNode(c.find(d(l.value)));g._rootNode=g.nodes[0];a={};for(var n=$jscomp.makeIterator(e.entries()),p=n.next();!p.done;a={node:a.node},p=n.next()){var q=$jscomp.makeIterator(p.value),r=q.next().value,t=q.next().value;a.node=c.find(d(r));t.forEach(function(a){return function(b){b=c.find(d(b));g.connect(a.node,b)}}(a))}g.nodes.forEach(function(a){a.setAllArgs(b.N.find(function(b){return b.I===a.id}).A)});g.description=b.M?b.M[0]||"":"";
g.units=b.M?b.M[1]||"":"";g.ref=b.M?b.M[2]:null;return g}catch(W){console.log(W)}};$jscomp.global.Object.defineProperties(m.prototype,{meta:{configurable:!0,enumerable:!0,get:function(){return this._meta},set:function(a){this._meta=a}},description:{configurable:!0,enumerable:!0,get:function(){return this._description},set:function(a){this._description=g(a)?a:this._description}},units:{configurable:!0,enumerable:!0,get:function(){return this._units},set:function(a){this._units=g(a)?a:this._units}},
ref:{configurable:!0,enumerable:!0,get:function(){return this._ref},set:function(a){this._ref=e(a)&&(g(a)||h(a))?a:null}},root:{configurable:!0,enumerable:!0,get:function(){return this._rootNode}},nodes:{configurable:!0,enumerable:!0,get:function(){return[].concat($jscomp.arrayFromIterable(this.G.keys()))}},graph:{configurable:!0,enumerable:!0,get:function(){return this.G}},topo:{configurable:!0,enumerable:!0,get:function(){return V(this.G)}},leafs:{configurable:!0,enumerable:!0,get:function(){return B(this.G).Q}},
orphans:{configurable:!0,enumerable:!0,get:function(){for(var a=[],c=$jscomp.makeIterator(this.G.entries()),d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value);var e=d.next().value;0===d.next().value.size&&e!==this._rootNode&&a.push(e)}return a}},names:{configurable:!0,enumerable:!0,get:function(){return this.nodes.map(function(a){return a.name})}},topoNames:{configurable:!0,enumerable:!0,get:function(){return this.topo.map(function(a){return a.name})}},ids:{configurable:!0,enumerable:!0,
get:function(){return this.nodes.map(function(a){return a.id})}},topoIds:{configurable:!0,enumerable:!0,get:function(){return this.topo.map(function(a){return a.id})}}});return m}();
